###############################################
# 统一环境变量示例 (复制为 .env 后再修改)       #
# 后端运行 + 前端构建共用一个文件              #
# NOTE: 只有以 VITE_ 开头的变量会进入前端代码 #
###############################################

NODE_ENV=production
PORT=3000

###############################################
# 数据库 (Prisma)
###############################################
DATABASE_URL=mysql://username:password@your-cloud-db-host:3306/database_name
# 示例（docker compose 自带 mysql 服务时）：
# DATABASE_URL=mysql://root:your-mysql-password@db:3306/personal_game_db

###############################################
# Redis
###############################################
REDIS_HOST=redis
REDIS_PORT=6379
# REDIS_PASSWORD=

###############################################
# 安全 / Auth
###############################################
JWT_SECRET=CHANGE_ME_LONG_RANDOM_STRING_AT_LEAST_32_CHARS

###############################################
# 基础开关
###############################################
MAINTENANCE_MODE=false

###############################################
# CORS （如需限制可启用）
###############################################
# CORS_ALLOWED_ORIGINS=https://example.com,https://admin.example.com

###############################################
# 邮件 SMTP（开启邮箱验证码等功能时使用）
###############################################
# SMTP_HOST=smtp.example.com
# SMTP_PORT=465
# SMTP_USER=your-email@example.com
# SMTP_PASS=secret
# SMTP_SECURE=true

###############################################
# 速率限制（可选）
###############################################
# RATE_LIMIT_WINDOW=60000   # 毫秒窗口 60s
# RATE_LIMIT_MAX=100        # 窗口内最大请求数

###############################################
# 上传设置（如要自定义可打开）
###############################################
# UPLOAD_PATH=/app/backend/uploads
# MAX_FILE_SIZE=10485760

###############################################
# IP 黑/白名单
###############################################
# IP_WHITELIST=127.0.0.1
# IP_BLACKLIST=

###############################################
# 前端公开变量 (仅 VITE_ 前缀会被编译进浏览器) 
###############################################
VITE_APP_TITLE=个人游戏网站
VITE_API_BASE_URL=/api
# 示例（前后端分域时）：
# VITE_API_BASE_URL=https://api.example.com/api

###############################################
# Docker 构建说明
# 1. 构建镜像时 Dockerfile 会 `grep '^VITE_'` 生成前端 .env.production.local
# 2. 非 VITE_ 变量不会进入前端 bundle
# 3. 运行： cp .env.example .env  -> 修改  -> docker compose build --no-cache && docker compose up -d
# 4. 首次启动会自动执行迁移 + 种子（可用 DISABLE_SEED=1 关闭）
###############################################

# 使用说明速览：
# 1. cp .env.example .env
# 2. 修改 DATABASE_URL / JWT_SECRET / VITE_API_BASE_URL 等
# 3. docker compose build --no-cache && docker compose up -d
# 4. 浏览器访问： http://你的域名/ ；API: /api/health
# 5. 默认种子账号： admin/admin123  testuser/user123（如未改 seed 脚本）
